# Injective Cosmwasm Контракти

Цей репозиторій містить повний вихідний код основних смарт-контрактів, розгорнутих на [Injective](https://injective.com).

## Контракти

У цих контрактах закладена основна схема роботи системи.

| Contract                                                    | Description                                                                                |
| ----------------------------------------------------------- | ------------------------------------------------------------------------------------------ |
| [`dummy`](./contracts/dummy/README.ua.md)                               | Простий шаблон для створення нового контракту                                             |
| [`atomic-order-example`](./contracts/atomic-order-example/README.ua.md) | Приклад контракту про те, як робити атомарні ринкові замовлення на Injective, включаючи обробку відповіді |

## Розробка

### Налаштування середовища

- Rust v1.67.0
- `wasm32-unknown-unknown` target
- Docker

1. Встановіть [`rustup`](https://rustup.rs)
2. Виконайте наступні команди

```shell
rustup default 1.67.0
rustup target add wasm32-unknown-unknown
```

3. Переконайтеся, що [Docker](https://docker.com) встановлено на вашому комп'ютері

### Юніт / Інтеграційний тест

Кожен контракт містить вбудовані юніт-тести Rust у директоріях вихідного коду контракту. Ви можете запустити

```shell
cargo unit-test
```

### Компіляція

Перейдіть до директорії контракту і запустіть

Після перевірки, що тести пройшли, ви можете скомпілювати кожен контракт за допомогою наступного

```bash
RUSTFLAGS='-C link-arg=-s' cargo wasm
sha256sum target/wasm32-unknown-unknown/release/<CONTRACT_NAME>.wasm
```

#### Збірка

Для отримання робочих збірок виконайте наступні дії:

```bash
docker run --rm -v "$(pwd)":/code \
  --mount type=volume,source="$(basename "$(pwd)")_cache",target=/code/target \
  --mount type=volume,source=registry_cache,target=/usr/local/cargo/registry \
  cosmwasm/workspace-optimizer-arm64:0.12.11
```

Це виконує декілька оптимізацій, які можуть значно зменшити кінцевий розмір бінарних файлів контракту, які будуть
доступні в каталозі `artifacts/`

## Форматування

Переконайтеся, що ви запустили `rustfmt` перед створенням PR до репозиторію.

Щоб запустити `rustfmt`,

```
cargo fmt
```

## Лінтування

Вам також слід запустити `clippy`. Це інструмент для оптимізації коду в Rust. Він пропонує більш ефективний / зрозумілий код. Ви можете переглянути документ [документ clippy](https://rust-lang.github.io/rust-clippy/master/index.html) для отримання додаткової інформації.

### Запуск

```
cargo clippy -- -D warnings
```

## Тестування

Розробникам наполегливо рекомендується писати юніт-тести для нового коду, а також надсилати нові юніт-тести для старого коду. Юніт-тести
тести можна скомпілювати і запустити за допомогою: `cargo test --all`. Для більш детальної інформації, будь ласка, зверніться до розділу Юніт-тести.
